'use strict'

const babelRegister = require('babel-register')

module.exports = function (whitelist) {
  whitelist = whitelist || []

  babelRegister({
    ignore: function (filename) {
      var ignore = false

      if (filename.match('/node_modules/')) {
        ignore = true

        for (var i = 0, len = whitelist.length; i < len; i++) {
          var moduleName = whitelist[i]

          if (filename.match('/' + moduleName + '/')) {
            ignore = false
            break
          }
        }
      }

      return ignore
    }
  })
}
